<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scroll Wall ‚Ä¢ Women ‚Ä¢ Models ‚Ä¢ Influencers ‚Ä¢ Actors (Reddit)</title>
<style>
  :root{
    --bg:#0b1020; --panel:#111a2c; --ink:#e8eefc; --muted:#9bb1d6; --hot:#ff6fa3; --ok:#65ffc6;
    --card:#141e32; --chip:#16223a; --card2:#0f1627; --shadow: 0 14px 40px rgba(0,0,0,.45);
    --like:#6dffb2; --nope:#ff7a7a;
  }
  html,body{height:100%;background:radial-gradient(1200px 800px at 20% -10%, #152038 15%, transparent 60%), linear-gradient(#0b1020,#0b1020);color:var(--ink);font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0}
  *{box-sizing:border-box}

  header{padding:28px 18px 8px}
  h1{font-size:48px;letter-spacing:.5px;margin:0 0 8px}
  .subhead{color:var(--muted);font-weight:600;opacity:.9;margin:0 0 10px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .btn,button{appearance:none;border:none;background:var(--hot);color:#102; font-weight:900; padding:18px 22px;border-radius:18px; cursor:pointer; box-shadow: var(--shadow); font-size:20px}
  .btn.secondary{background:#1a2744;color:var(--ink);font-weight:800}
  .btn.ghost{background:#0f1a30;border:2px solid #233255;color:var(--ink);box-shadow:none}
  .badge{background:#1a2744;color:var(--ink); padding:10px 14px; border-radius:14px; font-weight:800; box-shadow:var(--shadow)}
  .liked-open{margin-left:auto}

  /* Control panel */
  .panel{background:var(--panel);border-radius:24px; box-shadow: var(--shadow); padding:18px; margin:10px 12px}
  .panel .grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  .stat{background:#0f1a30;border-radius:16px; padding:16px; text-align:center;font-weight:900;font-size:28px}

  /* Feed area */
  #feed{padding:12px; display:grid; grid-template-columns: 1fr; gap:16px; max-width:940px; margin:0 auto 120px}
  .card{position:relative; background:linear-gradient(180deg, var(--card), var(--card2)); border-radius:22px; box-shadow: var(--shadow); overflow:hidden; touch-action:none; user-select:none}
  .mediaWrap{position:relative; width:100%; aspect-ratio: 1/1; background:#0a1122}
  .mediaWrap img, .mediaWrap video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover}
  .scrim{position:absolute; inset:auto 0 0 0; height:46%; background:linear-gradient(180deg, rgba(9,14,28,0), rgba(9,14,28,.9) 65%, rgba(9,14,28,1)); pointer-events:none}
  .meta{position:absolute; left:0; right:0; bottom:0; padding:14px 16px 16px; z-index:3}
  .title{font-size:22px; font-weight:900; margin:0 0 6px}
  .byline{color:var(--muted); font-size:14px; margin-bottom:10px}
  .chips{display:flex; gap:10px; flex-wrap:wrap}
  .chip{background:var(--chip); color:#d7e3ff; padding:8px 12px; border-radius:999px; font-weight:800; font-size:14px}
  .star{position:absolute; left:12px; top:12px; width:46px; height:46px; border-radius:12px; display:grid; place-items:center; background:rgba(10,15,30,.55); border:1px solid rgba(255,255,255,.08); color:#ffd06b; font-size:24px; font-weight:900}
  .ghostLike{position:absolute; inset:0; display:grid; place-items:center; font-size:46px; font-weight:900; opacity:0; transition:opacity .2s}
  .ghostLike.like{color:var(--like)}
  .ghostLike.nope{color:var(--nope)}
  .dragging{will-change: transform, opacity}
  .loading{opacity:.6; filter:grayscale(.15)}

  /* Like / dismiss animations */
  @keyframes burst {0%{transform:scale(.6);opacity:.0} 50%{transform:scale(1.05);opacity:.95} 100%{transform:scale(1);opacity:0}}
  .burst{position:absolute; inset:0;pointer-events:none}
  .burst:after{content:"‚ú®"; position:absolute; inset:0; display:grid; place-items:center; font-size:64px; animation: burst .6s ease-out}

  @keyframes poof {0%{transform:scale(1);opacity:1} 100%{transform:scale(.85);opacity:0}}
  .poof{position:absolute; inset:0}
  .poof:after{content:"üí®"; position:absolute; inset:0; display:grid; place-items:center; font-size:54px; animation: poof .35s ease-out}

  /* Liked modal */
  dialog{border:none; padding:0; background:transparent}
  .sheet{background:var(--panel); border-radius:24px; box-shadow: var(--shadow); width:min(920px, 96vw); max-height:82vh; overflow:auto; padding:18px}
  .sheet h2{margin:6px 4px 12px}
  .likedGrid{display:grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap:12px}
  .thumb{position:relative; border-radius:14px; overflow:hidden; background:#0b1326}
  .thumb img, .thumb video{width:100%; height:180px; object-fit:cover; display:block}
  .thumb .bar{display:flex; gap:8px; padding:8px; align-items:center}
  .thumb .bar a{color:#aaccff; font-weight:800; text-decoration:none; font-size:13px}
  .pill{padding:6px 10px; border-radius:999px; font-weight:800}
  .pill.undo{background:#213357; color:#d6e5ff}
  .pill.open{background:#16243f; color:#9cc1ff}
  .closeRow{display:flex; gap:10px; justify-content:flex-end; margin:8px 0 2px}

  .mono{white-space:pre-wrap; background:#0e1931;border-radius:14px; padding:12px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:14px; color:#d7e6ff}

  /* make swipe smoother on iOS */
  .card, .mediaWrap{ -webkit-transform: translateZ(0) }
</style>
</head>
<body>
  <header>
    <div class="row">
      <h1>Scroll Wall</h1>
      <button id="btnLiked" class="btn secondary liked-open" title="Open liked">Liked ‚≠ê</button>
    </div>
    <p class="subhead">Women ‚Ä¢ Models ‚Ä¢ Influencers ‚Ä¢ Actors (Reddit). Swipe right to like, left to dismiss. Videos/GIFs auto-play. NSFW is enabled.</p>
  </header>

  <section class="panel" style="max-width:940px;margin:0 auto">
    <div class="grid">
      <button id="btnNew" class="btn">New batch</button>
      <button id="btnLoad" class="btn" style="background:var(--hot)">Load more</button>
      <div id="stat" class="stat">0/0</div>
      <button id="btnShuffle" class="btn ghost">Shuffle üîÄ</button>
      <button id="btnTrouble" class="btn secondary" style="grid-column:1/-1">Troubleshoot ü©∫</button>
    </div>
    <div id="trouble" class="mono" style="display:none;margin-top:12px"></div>
  </section>

  <main id="feed" aria-live="polite"></main>

  <!-- Liked modal -->
  <dialog id="likedDlg">
    <div class="sheet">
      <div class="closeRow">
        <button id="exportJson" class="btn ghost">Export JSON</button>
        <button id="closeLiked" class="btn">Close</button>
      </div>
      <h2>Liked ‚≠ê</h2>
      <div id="likedGrid" class="likedGrid"></div>
    </div>
  </dialog>

<script>
(() => {
  // === Curated list of women-only subreddits (mixed models/influencers/actors/singers) ===
  const WOMEN_SUBS = [
    "charlidamelio","MadisonBeer","SabrinaCarpenter","DuaLipa","EmRata","AlexisRen",
    "SommerRay","HaileeSteinfeld","EmmaWatson","SydneySweeney","AnaDeArmas","GalGadot",
    "SelenaGomez","ArianaGrande","GigiHadid","BellaHadid","DojaCat","MeganTheeStallion",
    "AddisonRae","LeaElui","HaileeBieber","Zendaya","KylieJenner","KendallJenner",
    "MilaKunis","ScarlettJohansson","AlexandraDaddario","MargotRobbie","EmilyBlunt",
    "NataliePortman","FlorencePugh","JennaOrtega","CamilaCabello","OliviaRodrigo",
    "Rihanna","Halsey","KarolG","AnyaTaylorJoy","MeganFox",
    "BarbaraPalvin","CandiceSwanepoel","MirandaKerr","AdrianaLima","AlessandraAmbrosio",
    "KarlieKloss","TaylorHill","JosephineSkriver","LilyJames","ElizabethOlsen",
    "KiernanShipka","SophieTurner","MaisieWilliams","KristenStewart","YaraShahidi",
    "KekePalmer","LucyHale","NinaDobrev","VictoriaJustice","AlexandraShipp",
    "LilyCollins","MaitreyiRamakrishnan","HannahStocking","SofieDossi","PiaWurtzbach",
    "LizaKoshy","AlishaLehmann","PaigeSpiranac","KaylaItsines","SommerRay",
    "AddisonRae","CharliXCX","BeckyG","TateMcRae","SZA","Saweetie","ChantelJeffries",
    "LanaDelRey","KaliUchis","SofiaVergara","SalmaHayek","PriyankaChopra",
    "DeepikaPadukone","AliaBhatt","IU","Jisoo","Jennie","Ros√©","Lisa","TwiceJihyo",
    "MomoHirai","Tzuyu","NewJeansMinji","KarinaAespa","WinterAespa",
    "EmmaMackey","LilyRoseDepp","AnaDeArmas","ElizabethDebicki","RachelZegler"
  ]
  // dedupe
  const SUBS = [...new Set(WOMEN_SUBS)].map(s => s.replace(/^r\//,''));

  // Elements
  const feed = document.getElementById('feed');
  const statEl = document.getElementById('stat');
  const btnNew = document.getElementById('btnNew');
  const btnLoad = document.getElementById('btnLoad');
  const btnShuffle = document.getElementById('btnShuffle');
  const btnTrouble = document.getElementById('btnTrouble');
  const trouble = document.getElementById('trouble');
  const likedDlg = document.getElementById('likedDlg');
  const likedGrid = document.getElementById('likedGrid');
  document.getElementById('btnLiked').onclick = () => openLiked();
  document.getElementById('closeLiked').onclick = () => likedDlg.close();
  document.getElementById('exportJson').onclick = exportLikes;

  // State
  let pool = [];     // posts ready to show
  let shown = 0;     // how many rendered
  let likes = JSON.parse(localStorage.getItem('likes_v1')||"[]");
  let lastError = "(none)";
  let building = false;

  // Helpers
  const sleep = ms => new Promise(r=>setTimeout(r,ms));
  const shuffle = arr => { for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]} return arr };

  function setStat(){
    statEl.textContent = `${shown}/${pool.length}`;
  }

  function logTrouble() {
    const ua = navigator.userAgent;
    const online = navigator.onLine;
    trouble.style.display = 'block';
    trouble.textContent =
`Online: ${online}
UA: ${ua}
Pool size: ${pool.length}, shown: ${shown}, likes: ${likes.length}
Last error: ${lastError}`;
  }

  btnTrouble.addEventListener('click', logTrouble);

  // Build a new pool by fetching many subs' top-of-week posts
  async function buildPool() {
    if (building) return;
    building = true;
    lastError = "(none)";
    pool.length = 0;
    shown = 0;
    feed.innerHTML = '';
    setStat();

    const batch = shuffle([...SUBS]).slice(0, 28); // 28 random name-subs
    // parallel fetch (but not too many at once)
    const chunk = 7;
    for (let i=0;i<batch.length;i+=chunk) {
      const slice = batch.slice(i,i+chunk);
      await Promise.all(slice.map(fetchSub));
      await sleep(350); // gentle pacing for mobile & rate limits
    }

    // If still dry, try once more with different subs
    if (pool.length === 0) {
      const retry = shuffle([...SUBS]).slice(0, 28);
      for (let i=0;i<retry.length;i+=chunk) {
        const slice = retry.slice(i,i+chunk);
        await Promise.all(slice.map(fetchSub));
        await sleep(350);
      }
    }

    shuffle(pool);
    setStat();
    building = false;
    if (pool.length === 0) toast("No fresh posts found. Try again in a bit.");
  }

  async function fetchSub(sub) {
    try{
      // public JSON, top this week, prefer media, include raw_json for emojis etc
      const url = `https://www.reddit.com/r/${encodeURIComponent(sub)}/top.json?limit=25&t=week&raw_json=1`;
      const t0 = performance.now();
      const r = await fetch(url, {headers:{'Accept':'application/json'}});
      if (!r.ok) { lastError = `Fetch ${sub}: ${r.status}`; return }
      const json = await r.json();

      const items = (json.data?.children||[])
        .map(n=>n.data)
        .filter(d => !d.stickied && !d.removed_by_category && !d.is_gallery) // keep simple
        .map(toPost)
        .filter(Boolean);

      // prefer image/video hosts we can display
      pool.push(...items);
    }catch(e){
      lastError = `Fetch ${sub} error: ${e.message}`;
    }
  }

  function toPost(d){
    // accept: image previews (i.redd.it) or native reddit_video (v.redd.it)
    let mediaUrl='', kind='image';
    if (d.is_video && d.media?.reddit_video?.fallback_url){
      mediaUrl = d.media.reddit_video.fallback_url; // mp4
      kind = 'video';
    } else if (d.preview?.images?.[0]?.source?.url){
      mediaUrl = d.preview.images[0].source.url.replace(/&amp;/g,'&');
      kind = 'image';
    } else if (/^https?:\/\/i\.redd\.it\//.test(d.url)){
      mediaUrl = d.url; kind='image';
    } else {
      return null;
    }
    return {
      id: d.id,
      title: d.title || "(untitled)",
      author: d.author, sub: d.subreddit, over18: !!d.over_18,
      permalink: `https://www.reddit.com${d.permalink}`,
      url: mediaUrl, kind
    }
  }

  // Render next N cards
  function renderMore(n=6){
    if (shown>=pool.length){ toast("No more right now."); return }
    const next = pool.slice(shown, shown+n);
    next.forEach(renderCard);
    shown += next.length;
    setStat();
  }

  function renderCard(post){
    const card = document.createElement('article');
    card.className = 'card';
    card.dataset.id = post.id;

    const media = document.createElement('div');
    media.className = 'mediaWrap';
    media.innerHTML = (post.kind==='video')
      ? `<video playsinline muted loop autoplay disablepictureinpicture controlslist="nodownload noplaybackrate noremoteplayback" class="v">
           <source src="${post.url}" type="video/mp4">
         </video>`
      : `<img loading="lazy" src="${post.url}" alt="">`;

    const star = document.createElement('button');
    star.className = 'star'; star.textContent = '‚≠ê';
    star.title = 'Like';
    star.addEventListener('click', (e)=>{ e.stopPropagation(); likeCard(card, post) });

    const ghostLike = document.createElement('div');
    ghostLike.className='ghostLike like'; ghostLike.textContent='LIKE';

    const ghostNope = document.createElement('div');
    ghostNope.className='ghostLike nope'; ghostNope.textContent='NOPE';

    const scrim = document.createElement('div'); scrim.className='scrim';
    const meta = document.createElement('div'); meta.className='meta';
    meta.innerHTML = `
      <h3 class="title">${escapeHtml(post.title)}</h3>
      <div class="byline">by u/${escapeHtml(post.author)} ‚Ä¢ r/${escapeHtml(post.sub)} ${post.over18?'<span class="chip">NSFW</span>':''}</div>
      <div class="chips">
        <a class="chip" href="${post.permalink}" target="_blank" rel="noopener">Reddit</a>
      </div>`;

    card.append(media, star, ghostLike, ghostNope, scrim, meta);
    feed.append(card);

    enableSwipe(card, ghostLike, ghostNope, post);
  }

  function escapeHtml(s){ return s.replace(/[&<>"]/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[c])) }

  // Swipe interactions
  function enableSwipe(card, ghostLike, ghostNope, post){
    let startX=0, startY=0, dx=0, dy=0, dragging=false;

    const onStart = (e)=>{
      dragging=true; card.classList.add('dragging');
      const t = e.touches? e.touches[0] : e;
      startX=t.clientX; startY=t.clientY;
    };
    const onMove = (e)=>{
      if(!dragging) return;
      const t = e.touches? e.touches[0] : e;
      dx = t.clientX-startX; dy = t.clientY-startY;
      const rot = (dx/16);
      card.style.transform = `translate(${dx}px, ${dy}px) rotate(${rot}deg)`;
      const p = Math.min(1, Math.abs(dx)/120);
      ghostLike.style.opacity = dx>0? p : 0;
      ghostNope.style.opacity = dx<0? p : 0;
      e.preventDefault(); // stop page scroll while dragging
    };
    const onEnd = ()=>{
      if(!dragging) return;
      dragging=false; card.classList.remove('dragging');
      ghostLike.style.opacity=0; ghostNope.style.opacity=0;

      const threshold = 110;
      if (dx>threshold){ likeCard(card, post, true); }
      else if (dx<-threshold){ dismissCard(card); }
      else { // snap back
        card.style.transition='transform .18s ease-out';
        card.style.transform='translate(0,0) rotate(0)';
        setTimeout(()=>{ card.style.transition=''; }, 180);
      }
      dx=dy=0;
    };

    card.addEventListener('mousedown', onStart);
    card.addEventListener('touchstart', onStart, {passive:false});
    window.addEventListener('mousemove', onMove, {passive:false});
    window.addEventListener('touchmove', onMove, {passive:false});
    window.addEventListener('mouseup', onEnd);
    window.addEventListener('touchend', onEnd);
  }

  function likeCard(card, post, viaSwipe=false){
    if (!likes.find(x=>x.id===post.id)) likes.unshift(post);
    localStorage.setItem('likes_v1', JSON.stringify(likes.slice(0,500)));
    card.append(el('div','burst'));
    if (viaSwipe) slideOut(card, +1); else fadeAway(card);
    updateLikedBadge();
  }
  function dismissCard(card){
    card.append(el('div','poof'));
    slideOut(card, -1);
  }
  function slideOut(card, dir){
    card.style.transition='transform .22s ease-out, opacity .22s ease-out';
    card.style.transform=`translate(${dir*260}px, -16px) rotate(${dir*10}deg)`;
    card.style.opacity='.0';
    setTimeout(()=> card.remove(), 240);
  }
  function fadeAway(card){
    card.style.transition='opacity .18s'; card.style.opacity='.0';
    setTimeout(()=> card.remove(), 200);
  }
  function el(tag, cls){ const n=document.createElement(tag); n.className=cls; return n }

  function updateLikedBadge(){
    document.getElementById('btnLiked').textContent = `Liked ‚≠ê (${likes.length})`;
  }

  function openLiked(){
    likedGrid.innerHTML = '';
    if (likes.length===0) likedGrid.innerHTML = '<p style="color:var(--muted)">No likes yet.</p>';
    likes.forEach(item=>{
      const wrap = document.createElement('div'); wrap.className='thumb';
      wrap.innerHTML = (item.kind==='video'
        ? `<video playsinline muted loop autoplay src="${item.url}"></video>`
        : `<img src="${item.url}" alt="">`)
        + `<div class="bar">
            <button class="pill undo">Undo</button>
            <a class="pill open" href="${item.permalink}" target="_blank" rel="noopener">Reddit ‚Üó</a>
           </div>`;
      wrap.querySelector('.undo').onclick = ()=>{
        likes = likes.filter(x=>x.id!==item.id);
        localStorage.setItem('likes_v1', JSON.stringify(likes));
        wrap.remove(); updateLikedBadge();
      }
      likedGrid.append(wrap);
    });
    likedDlg.showModal();
  }

  function exportLikes(){
    const blob = new Blob([JSON.stringify(likes,null,2)], {type:'application/json'});
    const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='likes.json'; a.click();
    URL.revokeObjectURL(a.href);
  }

  // Toast helper
  let toastTimer=null;
  function toast(msg){
    const t=document.createElement('div');
    t.textContent=msg; Object.assign(t.style,{
      position:'fixed', left:'50%', bottom:'22px', transform:'translateX(-50%)',
      background:'#2a0f14', color:'#ffcaca', padding:'12px 14px', borderRadius:'12px',
      fontWeight:'800', boxShadow: '0 10px 26px rgba(0,0,0,.45)', zIndex:99
    });
    document.body.append(t);
    clearTimeout(toastTimer); toastTimer=setTimeout(()=>t.remove(), 2200);
  }

  // Wire buttons
  btnNew.onclick = async () => { toast('Building a new batch‚Ä¶'); await buildPool(); if(pool.length) toast('Batch ready ‚Äî Load more!') };
  btnLoad.onclick = () => renderMore(6);
  btnShuffle.onclick = () => { pool = shuffle(pool); shown=0; feed.innerHTML=''; renderMore(6); setStat(); toast('Shuffled'); }

  // Initial build on first open (so there‚Äôs something)
  buildPool().then(()=> { if(pool.length) renderMore(6) });
  updateLikedBadge();
})();
</script>
</body>
</html>