<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Scroll Wall</title>
<style>
  body{margin:0;background:#0c1116;color:#e9f1ff;font:500 16px/1.4 system-ui,sans-serif}
  .wrap{max-width:820px;margin:20px auto;padding:16px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .chip{background:#1b2330;color:#d5e3ff;padding:12px 16px;border-radius:14px;
        border:1px solid #2a3345;cursor:pointer;font-weight:600}
  .chip.primary{background:#ff7aa2;color:#0b0f14;font-weight:800}
  .stack{margin-top:18px;display:grid;gap:18px}
  .card{position:relative;border-radius:20px;overflow:hidden;background:#111926;box-shadow:0 8px 30px rgba(0,0,0,.4)}
  .polaroid{background:#0e131a;padding:14px 14px 70px;border-radius:16px}
  .media{width:100%;aspect-ratio:4/5;object-fit:cover;border-radius:12px;background:#000}
  .title{position:absolute;left:20px;bottom:15px;right:20px;display:flex;justify-content:space-between;align-items:center}
  .sub{background:#0e1621;color:#b9c8dd;padding:8px 12px;border-radius:10px;font-size:14px}
  .btn{padding:10px 12px;border-radius:10px;background:#0e1621;color:#cfe1ff;border:1px solid #1f2a38;font-weight:700;cursor:pointer}
  .btn.star{background:#ff7aa2;color:#120b0c}
  .btn.good{background:#64f3c4;color:#021611}
  .btn.bad{background:#ff9aa6;color:#2a090b}
  dialog{border:0;background:#0d131b;color:#e9f1ff;border-radius:14px;width:min(720px,90vw)}
  dialog::backdrop{background:rgba(3,7,12,.7);backdrop-filter:blur(5px)}
  .modal-head{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #222}
  .modal-body{padding:12px 16px}
  .likedCard{display:grid;grid-template-columns:100px 1fr auto;gap:10px;align-items:center;padding:8px;border:1px solid #222;border-radius:12px;background:#121822}
  .likedCard img,.likedCard video{width:100px;height:80px;object-fit:cover;border-radius:8px}
  .mono{white-space:pre-wrap;font:13px/1.4 monospace;color:#c0d2f2}
</style>
</head>
<body>
<div class="wrap">
  <div class="row">
    <button id="homeBtn" class="chip">Home</button>
    <button id="likedBtn" class="chip">Liked ‚≠ê</button>
    <button id="tsBtn" class="chip right">Troubleshoot</button>
  </div>
  <div class="row" style="margin-top:12px">
    <button id="newBatch" class="chip">New batch</button>
    <button id="loadMore" class="chip primary">Load more</button>
    <div id="counter" class="chip">0/0</div>
    <button id="shuffleBtn" class="chip">Shuffle üîÄ</button>
  </div>
  <div id="stack" class="stack"></div>
  <div id="emptyMsg" style="display:none;margin-top:20px;color:#888">No posts yet.</div>
</div>

<!-- Liked modal -->
<dialog id="likedModal">
  <div class="modal-head">
    <strong>Liked ‚≠ê</strong>
    <button class="chip" onclick="likedModal.close()">Close</button>
  </div>
  <div class="modal-body"><div id="likedGrid"></div></div>
</dialog>

<!-- Troubleshoot modal -->
<dialog id="tsModal">
  <div class="modal-head">
    <strong>Troubleshoot</strong>
    <button class="chip" onclick="tsModal.close()">Close</button>
  </div>
  <div class="modal-body"><div id="tsBox" class="mono"></div></div>
</dialog>

<script>
(() => {
  const BATCH_SIZE=10, PAGE_ADD=5;
  // ‚úÖ Static media pool (replace/add with RedGifs MP4s, IG pics, etc.)
  const STATIC_MEDIA=[
    {url:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=1200",type:"image",sub:"Models"},
    {url:"https://samplelib.com/lib/preview/mp4/sample-5s.mp4",type:"video",sub:"RedGifs"},
    {url:"https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?w=1200",type:"image",sub:"Influencers"}
  ];
  let pool=[...STATIC_MEDIA],queue=[],shown=new Set(),likes=loadLikes(),log=[];

  // elements
  const stack=$("#stack"),counter=$("#counter"),emptyMsg=$("#emptyMsg");

  // helpers
  function $(q,el=document){return el.querySelector(q)}
  function $el(t,c){let e=document.createElement(t);if(c)e.className=c;return e}
  function saveLikes(){localStorage.setItem("likes",JSON.stringify(likes))}
  function loadLikes(){try{return JSON.parse(localStorage.getItem("likes")||"[]")}catch{return[]}}
  function updateCounter(){counter.textContent=`${Math.min(shown.size,queue.length)}/${queue.length}`}

  // events
  $("#newBatch").onclick=()=>{buildBatch();renderMore(true)}
  $("#loadMore").onclick=()=>renderMore(false)
  $("#shuffleBtn").onclick=()=>{queue.sort(()=>Math.random()-.5);log.push("shuffled")}
  $("#likedBtn").onclick=showLiked
  $("#homeBtn").onclick=()=>{likedModal.close();tsModal.close()}
  $("#tsBtn").onclick=()=>showTroubleshoot()

  function buildBatch(){queue=[...pool].sort(()=>Math.random()-.5).slice(0,BATCH_SIZE);shown.clear();stack.innerHTML="";updateCounter()}
  function renderMore(reset){if(reset)stack.innerHTML="";let add=0;for(const it of queue){if(add>=PAGE_ADD)break;if(shown.has(it.url))continue;stack.appendChild(card(it));shown.add(it.url);add++}emptyMsg.style.display=stack.children.length?"none":"block";updateCounter()}

  function card(it){
    const c=$el("div","card"),frame=$el("div","polaroid");
    let media;
    if(it.type==="video"){media=$el("video","media");media.src=it.url;media.autoplay=media.loop=media.muted=true;media.playsInline=true}
    else{media=$el("img","media");media.src=it.url}
    frame.appendChild(media);
    const title=$el("div","title"),sub=$el("div","sub");sub.textContent=it.sub||"‚Äî";
    const like=$el("button","btn star");like.textContent="‚≠ê";like.onclick=()=>doLike(it,c);
    const bad=$el("button","btn bad");bad.textContent="üëé";bad.onclick=()=>dismiss(c);
    title.append(sub,like,bad);frame.appendChild(title);c.appendChild(frame);return c;
  }

  function doLike(it,el){likes.unshift(it);saveLikes();dismiss(el)}
  function dismiss(el){el.style.transition="all .3s";el.style.opacity="0";setTimeout(()=>{el.remove();updateCounter()},250)}

  function showLiked(){const g=$("#likedGrid");g.innerHTML="";if(!likes.length){g.textContent="No likes yet."}else{likes.forEach(it=>{const row=$el("div","likedCard");const thumb=it.type==="video"?$el("video"):$el("img");thumb.src=it.url;if(it.type==="video"){thumb.muted=true;thumb.loop=true;thumb.autoplay=true}const meta=$el("div");meta.textContent=it.sub||"‚Äî";const rm=$el("button","chip");rm.textContent="Remove";rm.onclick=()=>{likes=likes.filter(x=>x.url!==it.url);saveLikes();showLiked()};row.append(thumb,meta,rm);g.appendChild(row)})}likedModal.showModal()}
  function showTroubleshoot(){const ua=navigator.userAgent;$("#tsBox").textContent=`Online:${navigator.onLine}\nUA:${ua}\nPool:${pool.length},Shown:${shown.size},Likes:${likes.length}\nLog:\n${log.join("\n")}`;tsModal.showModal()}

  buildBatch(); // initial
})();
</script>
</body>
</html>