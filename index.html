<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Scroll Wall ‚Äî Models ‚Ä¢ Influencers ‚Ä¢ Actors</title>
<style>
  :root{
    --bg:#0b0f14; --bg2:#101722; --panel:#182230;
    --ink:#e9f0ff; --muted:#a6b3c7; --hot:#ff6fa5;
    --ok:#6ee7b7; --warn:#ffd166; --accent:#6ea8ff;
    --card:#121821; --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:radial-gradient(1200px 400px at 50% -200px,#172030 0%,#0b0f14 60%);}
  body{font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
       color:var(--ink); -webkit-font-smoothing:antialiased; padding-bottom:48px;}
  a{color:var(--accent);text-decoration:none}
  .wrap{max-width:820px;margin:18px auto;padding:0 14px}
  .row{display:flex;gap:14px;flex-wrap:wrap;align-items:center}
  .controls{background:linear-gradient(180deg,#111a24, #0f151e);
            border:1px solid #213044;border-radius:22px;padding:18px;box-shadow:var(--shadow)}
  .btn{border:0;border-radius:16px;padding:18px 22px;font-weight:800;font-size:20px;
       background:linear-gradient(180deg,#ff8fb2,#ff5a94); color:#0c0f14; box-shadow:var(--shadow)}
  .btn:active{transform:translateY(1px)}
  .pill{min-width:88px;text-align:center;border-radius:14px;padding:12px 16px;
        background:#0f1620;border:1px solid #29364a;color:#cfe0ff;font-weight:800}
  .switch{appearance:none;width:66px;height:36px;border-radius:20px;position:relative;outline:none;border:1px solid #2a384e;background:#0c1320}
  .switch::after{content:"";position:absolute;top:3px;left:4px;width:30px;height:30px;border-radius:50%;background:#f0f5ff;transition:.2s}
  .switch:checked{background:#123423;border-color:#1f4b31}
  .switch:checked::after{transform:translateX(28px);background:#baf7d3}
  .input{flex:1;min-width:220px;border-radius:14px;background:#0f1620;border:1px solid #29364a;
         color:#e6f0ff;padding:14px 16px;font-size:16px}
  .toolbar{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap}
  .minor{color:var(--muted);font-size:14px;margin-top:10px}

  .soft{padding:14px 18px;border-radius:14px;background:#101826;border:1px solid #253449;color:#d7e7ff;font-weight:800;box-shadow:var(--shadow)}
  .soft:active{transform:translateY(1px)}

  .grid{display:grid;grid-template-columns:1fr;gap:18px;margin-top:16px}
  @media(min-width:700px){ .grid{grid-template-columns:1fr 1fr} }

  .card{background:linear-gradient(180deg,#141c26,#0d131c);
        border:1px solid #28384c;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);position:relative}
  .imgwrap{position:relative; background:#0a0f15; display:flex;align-items:center;justify-content:center; aspect-ratio:4/3}
  .imgwrap img{width:100%;height:100%;object-fit:contain; background:#0a0f15}
  .imgwrap::before{content:"";position:absolute;inset:0;background:
     linear-gradient(180deg,transparent 70%,rgba(8,12,18,.85)); pointer-events:none}
  .meta{padding:16px 16px 14px}
  .title{font-weight:900; font-size:22px; line-height:1.2; margin:0 0 8px}
  .by{color:var(--muted);font-size:14px;margin-bottom:10px}
  .tag{display:inline-block;border:1px solid #2a3950;color:#cfe3ff;padding:8px 12px;border-radius:12px;font-weight:800;margin-right:8px;background:#0f1722}
  .rowfoot{display:flex;align-items:center;gap:10px;margin-top:10px}
  .star{width:44px;height:44px;border-radius:50%;display:inline-grid;place-items:center;
        background:linear-gradient(180deg,#ffe08a,#ffc44b); color:#111; font-weight:900; border:0}
  .dismiss{width:44px;height:44px;border-radius:50%;display:inline-grid;place-items:center;
           background:#1d2430;border:1px solid #2a394d;color:#cbd6ea}
  .linkbtn{padding:10px 14px;border-radius:12px;border:1px solid #2a394d;background:#131b27;color:#d5e8ff;font-weight:800}

  .drag{touch-action:none}
  .flying{will-change:transform; transition:transform .18s ease, opacity .18s ease}

  .modal{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:rgba(0,0,0,.4);backdrop-filter:saturate(120%) blur(2px);z-index:30}
  .modal.show{display:flex}
  .sheet{width:min(820px,100%);background:linear-gradient(180deg,#101726,#0e1420);
         border-top-left-radius:20px;border-top-right-radius:20px;border:1px solid #223144;
         box-shadow:0 -12px 40px rgba(0,0,0,.45); padding:16px}
  .sheet h3{margin:6px 6px 10px}
  .subgrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(min-width:680px){ .subgrid{grid-template-columns:repeat(3,1fr)} }
  .chk{display:flex;gap:10px;align-items:center;background:#0f1622;border:1px solid #263449;border-radius:12px;padding:10px 12px}
  .close{padding:12px 16px;border-radius:12px;border:1px solid #2a394d;background:#141c28;color:#d7e8ff;font-weight:900}

  .toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);
         max-width:86vw;background:#2a1a1a;border:1px solid #503232;
         color:#ffd6d6;padding:12px 14px;border-radius:12px;font-weight:800;box-shadow:var(--shadow);z-index:40;display:none}
  .toast.show{display:block}

  canvas.fx{position:fixed;pointer-events:none;inset:0;z-index:50}
</style>
</head>
<body>
  <canvas class="fx" id="fx"></canvas>
  <div class="wrap">
    <div class="controls">
      <div class="row">
        <button id="load" class="btn">Load more</button>
        <button id="shuffle" class="soft" title="Shuffle feed">Shuffle üîÄ</button>
        <div id="count" class="pill">0/0</div>
        <label class="row" style="margin-left:auto;gap:12px;align-items:center">
          <input id="allowSfw" type="checkbox" class="switch" />
          <div style="font-weight:900">Allow SFW</div>
        </label>
        <label class="row" style="gap:12px;align-items:center">
          <input id="nsfw" type="checkbox" class="switch" />
          <div style="font-weight:900">Allow NSFW</div>
        </label>
      </div>
      <div class="toolbar">
        <input id="override" class="input" placeholder="e.g. reddit=r/FashionModels,r/Celebs,r/InstagramModels" />
        <button id="filtersBtn" class="soft">Filters ‚öôÔ∏è</button>
        <button id="likedBtn" class="soft">Liked ‚≠ê</button>
      </div>
      <div class="minor" id="loadedNote"></div>
    </div>

    <div id="grid" class="grid"></div>
  </div>

  <!-- Filters -->
  <div id="filtersModal" class="modal">
    <div class="sheet">
      <h3>Pick sources</h3>
      <div class="subgrid" id="filtersGrid"></div>
      <div class="row" style="margin-top:14px">
        <button id="filtersClear" class="close">Clear all</button>
        <div style="flex:1"></div>
        <button id="filtersClose" class="btn" style="padding:12px 16px">Save & Refresh</button>
      </div>
    </div>
  </div>

  <!-- Liked -->
  <div id="likedModal" class="modal">
    <div class="sheet">
      <h3>Liked ‚≠ê</h3>
      <div class="grid" id="likedGrid" style="max-height:60vh;overflow:auto"></div>
      <div class="row" style="margin-top:14px">
        <button id="undoBtn" class="soft">Undo last</button>
        <div style="flex:1"></div>
        <button id="exportBtn" class="soft">Export JSON</button>
        <button id="likedClose" class="btn" style="padding:12px 16px">Close</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

<script>
/* ========= curated SFW subs (focused on people; NO general scenic; NO FashionAdvice) ========= */
const DEFAULT_SFW_SUBS = [
  "Celebs","ModelPhotography","FashionModels","InstagramModels",
  "ModelPics","MostBeautiful","RedCarpet","LadyBoners","Beauty"
];

/* ========= people search terms ========= */
const PEOPLE = [
  "Emily Ratajkowski","Charli D'Amelio","Lea Elui","Halsey",
  "Kendall Jenner","Hailey Bieber","Bella Hadid","Gigi Hadid",
  "Dua Lipa","Barbara Palvin","Taylor Hill","Alexandra Daddario",
  "Ana de Armas","Margot Robbie","Sydney Sweeney","Zendaya",
  "Anya Taylor-Joy","Florence Pugh","Madelyn Cline","Gal Gadot"
];

/* ========= storage ========= */
const store = {
  liked: JSON.parse(localStorage.getItem("liked_v1")||"[]"),
  pushLiked(x){ this.liked.unshift(x); localStorage.setItem("liked_v1",JSON.stringify(this.liked)); },
  popLiked(){ const r=this.liked.shift(); localStorage.setItem("liked_v1",JSON.stringify(this.liked)); return r; }
};

/* ========= state ========= */
const state = {
  allowNSFW: true,           // default ON
  allowSFW:  false,          // default OFF (your request: ‚Äúget rid of SFW content‚Äù)
  loaded: 0, total: 0,
  enabledSubs: new Set(DEFAULT_SFW_SUBS),
};

/* ========= small helpers ========= */
const $ = s => document.querySelector(s);
const grid = $("#grid"), likedGrid=$("#likedGrid"), toastEl=$("#toast");
function showToast(m,ms=2400){ toastEl.textContent=m; toastEl.classList.add("show"); clearTimeout(showToast._t); showToast._t=setTimeout(()=>toastEl.classList.remove("show"),ms); }
function setCount(){ $("#count").textContent = `${state.loaded}/${state.total}`; }
const shuffleArr = a => { for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; };

/* ========= Reddit helpers ========= */
function pickImage(p){
  if (p?.preview?.images?.[0]?.source?.url) return p.preview.images[0].source.url.replaceAll("&amp;","&");
  const u=p?.url_overridden_by_dest||""; if(/\.(jpg|jpeg|png|gif|webp)(\?|$)/i.test(u)) return u;
  return null;
}
async function fetchTop(sub, allowNSFW, allowSFW){
  const url=`https://www.reddit.com/r/${sub}/top.json?raw_json=1&t=week&limit=50`;
  try{
    const r=await fetch(url,{mode:"cors"}); if(!r.ok) return [];
    const j=await r.json(); const out=[];
    for(const c of j.data?.children||[]){
      const d=c.data;
      // filter by SFW/NSFW rules
      if(d.over_18 && !allowNSFW) continue;
      if(!d.over_18 && !allowSFW) continue;
      const img=pickImage(d); if(!img) continue;
      out.push({id:d.id,title:d.title,img,author:d.author,sub:d.subreddit,permalink:`https://reddit.com${d.permalink}`,nsfw:!!d.over_18});
    }
    return out;
  }catch{ return []; }
}
async function searchPeople(name, allowNSFW, allowSFW){
  const url=`https://www.reddit.com/search.json?raw_json=1&q=${encodeURIComponent(name)}&sort=top&t=week&limit=50&type=link`;
  try{
    const r=await fetch(url,{mode:"cors"}); if(!r.ok) return [];
    const j=await r.json(); const out=[];
    for(const c of j.data?.children||[]){
      const d=c.data;
      if(d.over_18 && !allowNSFW) continue;
      if(!d.over_18 && !allowSFW) continue;
      const img=pickImage(d); if(!img) continue;
      out.push({id:d.id,title:d.title,img,author:d.author,sub:d.subreddit,permalink:`https://reddit.com${d.permalink}`,nsfw:!!d.over_18});
    }
    return out;
  }catch{ return []; }
}

/* ========= render ========= */
function cardHTML(item){
  const tag = item.nsfw? `<span class="tag" style="border-color:#5a2a2a;background:#1a1111;color:#ffb3b3">NSFW</span>` : `<span class="tag">SFW</span>`;
  return `
  <div class="card drag flying" data-id="${item.id}">
    <div class="imgwrap"><img src="${item.img}" alt="" loading="lazy"></div>
    <div class="meta">
      <h3 class="title">${item.title.replace(/[<>]/g,"")}</h3>
      <div class="by">by u/${item.author} ‚Ä¢ r/${item.sub}</div>
      <div class="rowfoot">
        <button class="star" title="Like">‚òÖ</button>
        <button class="dismiss" title="Dismiss">√ó</button>
        <a class="linkbtn" href="${item.permalink}" target="_blank" rel="noopener">Reddit</a>
        ${tag}
      </div>
    </div>
  </div>`;
}
function renderFeed(items){
  const f=document.createDocumentFragment();
  items.forEach(it=>{
    const d=document.createElement("div"); d.innerHTML=cardHTML(it);
    const node=d.firstElementChild; attachCardHandlers(node,it); f.appendChild(node);
  });
  grid.appendChild(f);
}
function renderLiked(){
  likedGrid.innerHTML="";
  if(store.liked.length===0){ likedGrid.innerHTML=`<div class="minor">No likes yet.</div>`; return; }
  const f=document.createDocumentFragment();
  store.liked.forEach(it=>{
    const d=document.createElement("div");
    d.innerHTML=`
      <div class="card">
        <div class="imgwrap"><img src="${it.img}" alt=""></div>
        <div class="meta">
          <h3 class="title">${it.title.replace(/[<>]/g,"")}</h3>
          <div class="by">by u/${it.author} ‚Ä¢ r/${it.sub}</div>
          <div class="rowfoot">
            <a class="linkbtn" href="${it.permalink}" target="_blank" rel="noopener">Reddit</a>
            <button class="dismiss" title="Remove">‚àí</button>
            <span class="tag">${it.nsfw?"NSFW":"SFW"}</span>
          </div>
        </div>
      </div>`;
    const node=d.firstElementChild;
    node.querySelector(".dismiss").addEventListener("click", ()=>{
      store.liked = store.liked.filter(x=>x.id!==it.id);
      localStorage.setItem("liked_v1",JSON.stringify(store.liked));
      renderLiked();
    });
    f.appendChild(node);
  });
  likedGrid.appendChild(f);
}

/* ========= FX ========= */
const fx=$("#fx"), ctx=fx.getContext("2d");
function sizeFx(){ fx.width=innerWidth; fx.height=innerHeight } addEventListener("resize",sizeFx); sizeFx();
function confetti(x,y,n=26){ const p=[]; for(let i=0;i<n;i++) p.push({x,y,vx:(Math.random()*2-1)*4,vy:-Math.random()*4-2,life:40+Math.random()*20,c:`hsl(${Math.random()*360},90%,60%)`}); run(p);
  function run(parts){ ctx.clearRect(0,0,fx.width,fx.height);
    for(const s of parts){ ctx.fillStyle=s.c; ctx.fillRect(s.x,s.y,4,6); s.x+=s.vx; s.y+=s.vy; s.vy+=0.15; s.life--; }
    const alive=parts.filter(s=>s.life>0); if(alive.length) requestAnimationFrame(()=>run(alive)); else ctx.clearRect(0,0,fx.width,fx.height);
  } }
function dust(x,y,n=16){ const p=[]; for(let i=0;i<n;i++) p.push({x,y,r:2+Math.random()*3,vx:(Math.random()*2-1)*2,vy:(Math.random()*2-1)*2,life:28+Math.random()*12});
  function run(parts){ ctx.clearRect(0,0,fx.width,fx.height); ctx.fillStyle="rgba(200,200,220,.5)";
    for(const s of parts){ ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); s.x+=s.vx; s.y+=s.vy; s.life--; s.r*=0.98; }
    const alive=parts.filter(s=>s.life>0); if(alive.length) requestAnimationFrame(()=>run(alive)); else ctx.clearRect(0,0,fx.width,fx.height);
  } run(p);
}

/* ========= swipe ========= */
function attachCardHandlers(node,item){
  const star=node.querySelector(".star"), close=node.querySelector(".dismiss");
  star.addEventListener("click",(e)=>{ store.pushLiked(item); const r=e.currentTarget.getBoundingClientRect(); confetti(r.left+r.width/2, r.top+scrollY); node.remove(); });
  close.addEventListener("click",(e)=>{ const r=e.currentTarget.getBoundingClientRect(); dust(r.left+r.width/2, r.top+scrollY); node.remove(); });

  let sx=0, sy=0, dx=0, dragging=false;
  node.addEventListener("touchstart",(ev)=>{ const t=ev.touches[0]; sx=t.clientX; sy=t.clientY; dx=0; dragging=true; node.classList.add("drag"); },{passive:true});
  node.addEventListener("touchmove",(ev)=>{ if(!dragging) return; const t=ev.touches[0]; if(Math.abs(t.clientY-sy)>14) return;
    dx=t.clientX-sx; node.style.transform=`translateX(${dx}px) rotate(${dx*0.03}deg)`; node.style.opacity=String(1-Math.min(Math.abs(dx)/220,0.35)); },{passive:true});
  node.addEventListener("touchend",()=>{ node.classList.remove("drag");
    if(Math.abs(dx)>120){ const r=node.getBoundingClientRect();
      if(dx>0){ store.pushLiked(item); confetti(r.left+r.width/2, r.top+scrollY); } else { dust(r.left+r.width/2, r.top+scrollY); }
      node.remove();
    } else { node.style.transform=""; node.style.opacity=""; }
    dragging=false; dx=0; });
}

/* ========= load ========= */
async function loadBatch(shuffleSources=false){
  const allowNSFW = $("#nsfw").checked;
  const allowSFW  = $("#allowSfw").checked;

  let sources=[];
  const ov=$("#override").value.trim();
  if(ov.startsWith("reddit=")){
    const subs=ov.split("=")[1].split(",").map(s=>s.replace(/^r\//,"").trim()).filter(Boolean);
    sources=subs.map(s=>({type:"sub",value:s}));
  }else{
    for(const s of state.enabledSubs) sources.push({type:"sub", value:s});
    PEOPLE.forEach(n=>sources.push({type:"search", value:n}));
  }
  if(sources.length===0){ showToast("No sources selected. Open Filters."); return; }

  if(shuffleSources) shuffleArr(sources);

  $("#loadedNote").textContent="Fetching‚Ä¶";
  const results=await Promise.all(sources.map(s => s.type==="sub" ? fetchTop(s.value,allowNSFW,allowSFW) : searchPeople(s.value,allowNSFW,allowSFW)));
  let flat=results.flat();

  // Dedup + randomize final set so feed is lively
  const seen=new Set(), unique=[];
  for(const it of flat){ if(seen.has(it.permalink)) continue; seen.add(it.permalink); unique.push(it); }
  shuffleArr(unique);

  if(unique.length===0){ showToast("No fresh image posts found. Try again or change Filters."); return; }

  state.total+=unique.length; state.loaded+=unique.length; setCount();
  $("#loadedNote").textContent=`Loaded ${state.total}.`;
  renderFeed(unique);
}

async function loadMore(){ await loadBatch(false); }
async function shuffleFeed(){
  // Clear and reload with randomized sources order
  grid.innerHTML=""; state.loaded=0; state.total=0; setCount(); $("#loadedNote").textContent="";
  await loadBatch(true);
}

/* ========= Filters UI + Refresh ========= */
function buildFilters(){
  const host=$("#filtersGrid"); host.innerHTML="";
  const mk=(label,val,checked=true)=>{
    const id="f_"+val; const wrap=document.createElement("label");
    wrap.className="chk"; wrap.innerHTML=`<input id="${id}" type="checkbox" ${checked?"checked":""}/> <div>${label}</div>`;
    wrap.querySelector("input").addEventListener("change",(e)=>{ if(e.target.checked) state.enabledSubs.add(val); else state.enabledSubs.delete(val); });
    host.appendChild(wrap);
  };
  DEFAULT_SFW_SUBS.forEach(s=>mk("r/"+s, s, state.enabledSubs.has(s)));
}
buildFilters();

/* ========= modals ========= */
const filtersModal=$("#filtersModal"), likedModal=$("#likedModal");
$("#filtersBtn").onclick=()=>{ buildFilters(); filtersModal.classList.add("show"); }
$("#filtersClose").onclick=async ()=>{
  // Save & Refresh: clear current, reset counters, reload
  filtersModal.classList.remove("show");
  grid.innerHTML=""; state.loaded=0; state.total=0; setCount(); $("#loadedNote").textContent="";
  await loadBatch(true);
};
$("#filtersClear").onclick=()=>{ state.enabledSubs.clear(); buildFilters(); }
filtersModal.addEventListener("click",(e)=>{ if(e.target===filtersModal) filtersModal.classList.remove("show"); });

$("#likedBtn").onclick=()=>{ renderLiked(); likedModal.classList.add("show"); }
$("#likedClose").onclick=()=>likedModal.classList.remove("show");
likedModal.addEventListener("click",(e)=>{ if(e.target===likedModal) likedModal.classList.remove("show"); });
$("#undoBtn").onclick=()=>{ const last=store.popLiked(); if(last){ showToast("Undid last like"); renderLiked(); } else showToast("Nothing to undo"); };
$("#exportBtn").onclick=()=>{
  const blob=new Blob([JSON.stringify(store.liked,null,2)],{type:"application/json"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download="liked.json"; a.click(); URL.revokeObjectURL(a.href);
};

/* ========= init ========= */
$("#nsfw").checked = true;     // NSFW default ON
$("#allowSfw").checked = false;// SFW default OFF (you can toggle on)
setCount();
$("#load").onclick=loadMore;
$("#shuffle").onclick=shuffleFeed;
</script>
</body>
</html>