<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scroll Wall • Demo (no API)</title>
<style>
  :root{
    --bg: #0d0f12;
    --bg2:#14171c;
    --ink:#f3f4f6;
    --muted:#9aa4b2;
    --accent:#ff68a0;
    --panel:#232a33;
    --polaroid:#272f3a;
    --polaroid-edge:#1a1f26;
    --cardGlow: rgba(255,104,160,.25);
    --star:#ffd15a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
    color:var(--ink);
    background:
      radial-gradient(1200px 600px at -10% -10%,#1f2430,transparent 60%),
      radial-gradient(1000px 500px at 110% -10%,#1a2130,transparent 55%),
      radial-gradient(1200px 600px at 50% 120%,#12161d,transparent 60%),
      linear-gradient(#0c0f14,#0d0f12);
    background-attachment: fixed;
  }
  header{
    padding:28px 20px 10px;
    position:sticky; top:0; z-index:10;
    backdrop-filter: blur(10px);
    background:linear-gradient(180deg, rgba(13,15,18,.9), rgba(13,15,18,.55) 60%, transparent);
  }
  h1{margin:0 0 6px;font-size:clamp(26px,5vw,40px);letter-spacing:.5px}
  .subtitle{color:var(--muted);font-weight:600}

  .controls{
    margin:16px 0 6px; padding:14px; border-radius:18px;
    background:linear-gradient(180deg, rgba(35,42,51,.8), rgba(35,42,51,.55));
    box-shadow: 0 1px 0 #000 inset, 0 6px 24px rgba(0,0,0,.35);
    display:flex; gap:12px; align-items:center; flex-wrap:wrap;
  }
  .btn{
    background:var(--accent); color:#111; font-weight:800;
    padding:12px 18px; border:none; border-radius:16px; cursor:pointer;
    box-shadow: 0 8px 24px var(--cardGlow);
  }
  .pill{
    padding:10px 14px; border-radius:14px; background:#1b212a; color:var(--ink);
    display:flex; align-items:center; gap:10px;
  }
  .pill input[type="checkbox"]{width:18px;height:18px; accent-color:var(--accent)}
  .pill input[type="text"]{
    width:min(520px,80vw); background:transparent; border:none; outline:none; color:#cfd6df;
  }

  /* Grid */
  .grid{
    columns: 1; column-gap:16px; padding:10px 16px 60px;
  }
  @media (min-width:700px){ .grid{ columns:2; } }
  @media (min-width:1100px){ .grid{ columns:3; } }

  /* Polaroid card */
  .card{
    break-inside: avoid; margin:12px 0; position:relative;
    display:block; text-decoration:none; color:inherit;
    border-radius:20px; padding:14px 14px 70px;
    background:
      linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.0) 35%),
      linear-gradient(180deg, var(--polaroid), var(--polaroid-edge));
    box-shadow:
      0 1px 0 rgba(255,255,255,.04) inset,
      0 10px 30px rgba(0,0,0,.5),
      0 0 0 1px rgba(255,255,255,.04);
  }
  .card:hover{ box-shadow: 0 10px 30px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.06); }
  .thumb{
    width:100%; border-radius:14px; display:block; background:#0f1318;
    aspect-ratio: 4 / 5; object-fit: cover;
    box-shadow: 0 6px 20px rgba(0,0,0,.5);
  }
  .meta{margin:10px 4px 0; display:flex; justify-content:space-between; align-items:center; gap:10px}
  .title{font-weight:700; font-size:16px; line-height:1.25}
  .tag{color:var(--muted); font-size:13px}
  .rate{
    position:absolute; left:0; right:0; bottom:0;
    padding:10px 14px 14px; display:flex; justify-content:space-between; align-items:center;
    background:linear-gradient(180deg, transparent, rgba(0,0,0,.25) 30%, rgba(0,0,0,.45));
    border-radius:0 0 20px 20px;
  }
  .star{font-size:22px; cursor:pointer; color:#555}
  .star.active{ color:var(--star); text-shadow:0 0 14px rgba(255,209,90,.35); }
  .score{color:var(--muted); font-weight:700}

  .empty{ color:var(--muted); text-align:center; padding:24px 0 40px; }
  .counter{ font-weight:800; padding:8px 12px; background:#1116; border-radius:12px; }

  /* subtle scrollbars for desktop */
  ::-webkit-scrollbar{width:10px;height:10px}
  ::-webkit-scrollbar-thumb{background:#2a323d;border-radius:8px}
</style>
</head>
<body>
  <header>
    <h1>Scroll Wall</h1>
    <div class="subtitle">Demo with built-in posts (no API). Rate with ⭐</div>

    <div class="controls">
      <button id="btnMore" class="btn">Load more</button>
      <span id="counter" class="counter">0/0</span>
      <label class="pill"><input id="nsfwToggle" type="checkbox" checked disabled>
        <span>Allow NSFW (n/a in demo)</span></label>
      <label class="pill" title="Not used in demo">
        <span style="opacity:.7">Override:&nbsp;?</span>
        <input id="overrideBox" type="text" placeholder="This demo ignores overrides" disabled>
      </label>
    </div>
  </header>

  <main class="grid" id="grid"></main>
  <div id="empty" class="empty">Nothing yet — tap <b>Load more</b>.</div>

<script>
/* ========= DEMO DATA (no network) =========
   Using Picsum placeholder images (safe) to simulate posts.
   Each object = one “Reddit-like” post.
*/
const demoPosts = (() => {
  // A couple helper arrays to make believable titles/tags
  const topics = ["Editorial", "Runway", "Portrait", "Studio Light", "Street Fashion", "Lookbook", "Beauty", "Film Grain", "Monochrome", "Backstage"];
  const names  = ["Ava", "Maya", "Zoe", "Luna", "Nova", "Isla", "Mila", "Rose", "Ivy", "Aria", "Skye", "Mira"];
  const subs   = ["r/FashionModels","r/ModelPhotography","r/Streetwear","r/MakeupAddiction","r/femalefashionadvice"];

  // Build 60 items with stable Picsum IDs (4:5 portrait crop)
  const ids = Array.from({length: 60}, (_,i)=> 100 + i);
  return ids.map((id,idx)=>({
    id: 'demo_'+id,
    title: `${names[idx % names.length]} — ${topics[idx % topics.length]}`,
    image: `https://picsum.photos/id/${id}/800/1000`,   // 4:5 portrait
    thumb: `https://picsum.photos/id/${id}/400/500`,    // smaller
    sourceUrl: `https://picsum.photos/id/${id}`,
    subreddit: subs[idx % subs.length],
    nsfw:false
  }));
})();

/* ========= STATE ========= */
const state = {
  cursor: 0,
  pageSize: 9,
  data: demoPosts,       // In real build this would be fetched
  ratings: loadRatings() // {id: score}
};

function loadRatings(){
  try{
    return JSON.parse(localStorage.getItem('scrollwall_ratings')||'{}');
  }catch{ return {}; }
}
function saveRatings(){
  localStorage.setItem('scrollwall_ratings', JSON.stringify(state.ratings));
}

/* ========= RENDER ========= */
const grid   = document.getElementById('grid');
const empty  = document.getElementById('empty');
const counter= document.getElementById('counter');
const btnMore= document.getElementById('btnMore');

function updateCounter(){
  counter.textContent = `${Math.min(state.cursor, state.data.length)}/${state.data.length}`;
}

function cardTemplate(p){
  const score = state.ratings[p.id] ?? 0;
  const stars = [1,2,3,4,5].map(n =>
    `<span class="star ${n<=score?'active':''}" data-id="${p.id}" data-score="${n}">★</span>`
  ).join('');
  return `
  <a class="card" href="${p.sourceUrl}" target="_blank" rel="noopener">
    <img class="thumb" src="${p.thumb}" alt="${p.title}">
    <div class="meta">
      <div>
        <div class="title">${p.title}</div>
        <div class="tag">${p.subreddit}</div>
      </div>
    </div>
    <div class="rate">
      <div>${stars}</div>
      <div class="score" id="score-${p.id}">${score.toFixed(1)}</div>
    </div>
  </a>`;
}

function renderMore(){
  const start = state.cursor;
  const end   = Math.min(start + state.pageSize, state.data.length);
  const slice = state.data.slice(start, end);
  if (slice.length===0) return;

  empty.style.display = 'none';
  const html = slice.map(cardTemplate).join('');
  const wrap = document.createElement('div');
  wrap.innerHTML = html;
  // Append nodes so images can load progressively
  [...wrap.children].forEach(n => grid.appendChild(n));

  state.cursor = end;
  updateCounter();
}

function handleRating(e){
  const t = e.target;
  if(!t.classList.contains('star')) return;
  const id = t.getAttribute('data-id');
  const val= Number(t.getAttribute('data-score')) || 0;

  state.ratings[id] = val;
  saveRatings();

  // Update stars in that card only
  const card = t.closest('.card');
  card.querySelectorAll('.star').forEach(s=>{
    const n = Number(s.getAttribute('data-score'));
    s.classList.toggle('active', n<=val);
  });
  const scoreEl = card.querySelector(`#score-${id}`);
  if(scoreEl) scoreEl.textContent = val.toFixed(1);
}

/* ========= HOOK UP ========= */
btnMore.addEventListener('click', renderMore);
grid.addEventListener('click', handleRating);
updateCounter();

/* Optional: auto-load first page for a nicer first impression */
renderMore();
</script>
</body>
</html>